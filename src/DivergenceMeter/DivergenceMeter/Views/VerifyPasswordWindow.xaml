<Window x:Class="DivergenceMeter.Views.VerifyPasswordWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DivergenceMeter.Views"
        xmlns:prism="http://prismlibrary.com/"
        xmlns:helpers="clr-namespace:DivergenceMeter.Helpers" 
        xmlns:converter="clr-namespace:DivergenceMeter.Converters"
        prism:ViewModelLocator.AutoWireViewModel="True"
        mc:Ignorable="d"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="White"
        Opacity="0.8"
        ShowInTaskbar="False"
        Title="VerifyPasswordWindow" Width="500" Height="500">
    <Window.Resources>
        <converter:BooleanToHiddenVisibilityConverter x:Key="boolToHiddenVisibilityConverter"/>
        <converter:InvertBooleanToHiddenVisibilityConverter x:Key="invertBoolToHiddenVisibilityConverter"/>
    </Window.Resources>
    <Border>
        <Grid>
            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="3*"/>
                    <RowDefinition Height="5*"/>
                </Grid.RowDefinitions>
                <StackPanel Visibility="{Binding ShowChangePassword ,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource invertBoolToHiddenVisibilityConverter}}" Grid.Row="0" Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  Margin="0 10">
                        <TextBlock Width="60" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20 0 20 0" Text="输入密码"/>
                        <PasswordBox FontSize="24" helpers:Secure.Password="{Binding Password,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  VerticalAlignment="Center" Height="40" Width="180" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 10">
                        <Button IsDefault="True" VerticalAlignment="Center" Height="40" Width="60" Margin="20 0 10 0" Command="{Binding PreChangePasswordCommand}" HorizontalAlignment="Left" Content="修改密码"/>
                        <Button IsDefault="True" VerticalAlignment="Center" Height="40" Width="60" Margin="20 0 10 0" Command="{Binding VerifyPasswordCommand}" HorizontalAlignment="Left" Content="解锁"/>
                        <Button IsDefault="True" VerticalAlignment="Center" Height="40" Width="60" Margin="20 0 10 0" Command="{Binding CloseTheWindowCommand}" HorizontalAlignment="Left" Content="关闭"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  Margin="0 10">
                        <TextBlock Foreground="red" HorizontalAlignment="Left"  VerticalAlignment="Center"  Margin="0 10" Text="{Binding PasswordTip}"/>
                    </StackPanel>
                </StackPanel>
                <StackPanel Grid.Row="1" Visibility="{Binding ShowChangePassword ,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource boolToHiddenVisibilityConverter}}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  Margin="0 10">
                            <TextBlock Width="60" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20 0 20 0" Text="输入旧密码"/>
                            <PasswordBox FontSize="24" helpers:Secure.Password="{Binding OldPassword,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  VerticalAlignment="Center" Height="40" Width="180" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 10">
                            <TextBlock Width="60" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20 0 20 0" Text="输入新密码"/>
                            <PasswordBox FontSize="24" helpers:Secure.Password="{Binding NewPassword,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  VerticalAlignment="Center" Height="40" Width="180" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 10">
                            <TextBlock Width="60" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20 0 20 0" Text="重复新密码"/>
                            <PasswordBox FontSize="24" helpers:Secure.Password="{Binding NewPassword2,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  VerticalAlignment="Center" Height="40" Width="180" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 10">
                            <Button IsDefault="True" VerticalAlignment="Center" Height="40" Width="60" Margin="20 0 10 0" Command="{Binding ChangePasswordCommand}" HorizontalAlignment="Left" Content="确认"/>
                            <Button IsDefault="True" VerticalAlignment="Center" Height="40" Width="60" Margin="20 0 10 0" Command="{Binding UndoChangePasswordCommand}" HorizontalAlignment="Left" Content="取消"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  Margin="0 10">
                            <TextBlock Foreground="red" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0 10" Text="{Binding PasswordChangeTip}"/>
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
            </Grid>
           
        </Grid>
    </Border>
</Window>
